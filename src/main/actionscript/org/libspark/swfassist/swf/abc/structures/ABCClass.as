/* * The Spark Project ( http://libspark.org ) * * Licensed under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * *     http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,  * either express or implied. See the License for the specific language * governing permissions and limitations under the License. * * The Original Code is [Open Source Virtual Machine.]. * * The Initial Developer of the Original Code is Adobe System Incorporated. * Portions created by the Initial Developer are Copyright (C) 2004-2006 * the Initial Developer. All Rights Reserved. * * Contributor(s): * * Adobe AS3 Team * Mateusz Malczak ( http://segfaultlabs.com ) * Daniel Riley	 ( http://scientificsciences.com ) */package org.libspark.swfassist.swf.abc.structures{	import org.libspark.swfassist.swf.abc.consts.ABCConsts;	/**	 * This is description of a single Action Script 3 class, precisely	 * ABCClass stores all static properties and methods of a class. 	 * ABCClass contains reference to the script where it was defined,	 * and a reference to an ABCInstance objects. Action Script 3 	 * classes are fully defined with use of ABCClass together with 	 * ABCInstance. 	 * Class entry point is init method, this is where class static 	 * properties are initialized. Class initialization function is 	 * always present in AVM2 bytecode it is created for all classes 	 * used in project. If class doesnt contain any static properties,	 * class initialization is build of three opcodes. 	 *	 * <listing>	 *  0          getlocal0     	  	 *  1          pushscope     	  	 *  2          returnvoid 	 * </listing>  	 * 	 * @author malczak	 * @author danriley	 * @version 0.2	 */		final public class ABCClass extends ABCTraitsInfo implements IABCTraits	{		private var _instance :ABCInstance;		private var _script	:ABCTraits;				protected var _traits :Array;		protected var _init   :ABCMethodInfo; 				public function ABCClass()		{			_traits = null;		}				public function get init():ABCMethodInfo 		{ 			return _init; 		}				public function set init(value:ABCMethodInfo):void 		{ 			_init = value;						if( _init != null )				_init.kind = ABCConsts.TRAIT_Method;		}				public function get instanceRef():ABCInstance		{			return _instance;		}				public function set instanceRef( value:ABCInstance ):void		{			_instance = value;						if( _instance != null )				_instance.classRef = this;		}				public function get scriptRef():ABCTraits		{			return _script;		}				public function set scriptRef( value:ABCTraits ):void		{			_script = value;		}				public function get traits():Array		{			if ( _traits == null ) _traits = new Array();			return _traits;		}		}}